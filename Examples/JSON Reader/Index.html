<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JSON Reader</title>
    <style>
        
        #output,
        textarea {
            float: left;
            height: 400px;
            margin: 0 16px 16px 0;
            width: 400px;
            word-wrap: break-word;
        }
        
    </style>
</head>
<body>
    <h1>JSON Reader</h1>
    <textarea id="inp-json">{
    name: "Awesome level",
    assets: [
        { id: "img-x", type: "image", path: "some/path/x.png" },
        { id: "img-y",  type: "image", path: "some/path/y.png" },
        { id: "aud-a", type: "audio", path: "some/other/path/a.wav" },
        { id: "aud-b", type: "audio", path: "some/other/path/b.wav" },
    ],
    multiplayer: true,
    startPosition: {
        x: 100,
        y: 200
    }
}</textarea>
    <div id="output"></div>
    <script src="../../Extern/Rule.js"></script>
    <script src="../../Source/Grammar.js"></script>
    <script src="JsonReader.js"></script>
    <script>

        var outputEl = document.getElementById("output");
        var inputEl = document.getElementById("inp-json");

        function output(text)
        {
            var result = Abitvin.JsonReader.read(text);
            console.log(result);
            outputEl.textContent = JSON.stringify(result.branches[0]);
        }

        inputEl.oninput = function() {
            output(inputEl.value);    
        }

        output(inputEl.value);

    </script>
</body>
</html>
